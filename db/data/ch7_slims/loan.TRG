TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `insert_loan_history` AFTER INSERT ON `loan`\n     FOR EACH ROW INSERT INTO loan_history\n     SET loan_id=NEW.loan_id,\n     item_code=NEW.item_code,\n     member_id=NEW.member_id,\n     loan_date=NEW.loan_date,\n     due_date=NEW.due_date,\n     renewed=NEW.renewed,\n     is_lent=NEW.is_lent,\n     is_return=NEW.is_return,\n     return_date=NEW.return_date,\n     input_date=NEW.input_date,\n     last_update=NEW.last_update,\n     title=(SELECT b.title FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id WHERE i.item_code=NEW.item_code),\n     biblio_id=(SELECT b.biblio_id FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id WHERE i.item_code=NEW.item_code),\n     call_number=(SELECT IF(i.call_number IS NULL, b.call_number,i.call_number) FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id WHERE i.item_code=NEW.item_code),\n     classification=(SELECT b.classification FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id WHERE i.item_code=NEW.item_code),\n     gmd_name=(SELECT g.gmd_name FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id LEFT JOIN mst_gmd g ON g.gmd_id=b.gmd_id WHERE i.item_code=NEW.item_code),\n     language_name=(SELECT l.language_name FROM biblio b LEFT JOIN item i ON i.biblio_id=b.biblio_id LEFT JOIN mst_language l ON b.language_id=l.language_id WHERE i.item_code=NEW.item_code),\n     location_name=(SELECT ml.location_name FROM item i LEFT JOIN mst_location ml ON i.location_id=ml.location_id WHERE i.item_code=NEW.item_code),\n     collection_type_name=(SELECT mct.coll_type_name FROM mst_coll_type mct LEFT JOIN item i ON i.coll_type_id=mct.coll_type_id WHERE i.item_code=NEW.item_code),\n     member_name=(SELECT m.member_name FROM member m WHERE m.member_id=NEW.member_id),\n     member_type_name=(SELECT mmt.member_type_name FROM mst_member_type mmt LEFT JOIN member m ON m.member_type_id=mmt.member_type_id WHERE m.member_id=NEW.member_id)' 'CREATE DEFINER=`root`@`%` TRIGGER `update_loan_history` AFTER UPDATE ON `loan`\n     FOR EACH ROW UPDATE loan_history \n    SET is_lent=NEW.is_lent,\n    is_return=NEW.is_return,\n    renewed=NEW.renewed,\n    return_date=NEW.return_date\n    WHERE loan_id=NEW.loan_id' 'CREATE DEFINER=`root`@`%` TRIGGER `delete_loan_history` AFTER DELETE ON `loan`\n     FOR EACH ROW DELETE FROM `loan_history` WHERE loan_id=OLD.loan_id'
sql_modes=1411383296 1411383296 1411383296
definers='root@%' 'root@%' 'root@%'
client_cs_names='latin1' 'latin1' 'latin1'
connection_cl_names='latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci'
created=158953679184 158953679181 158953679180
